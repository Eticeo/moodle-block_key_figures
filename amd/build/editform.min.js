define("block_key_figures/editform",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;function blockKeyFiguresWaitModal(instid){var selector;(selector="input[name='blockid'][value='"+instid+"']",new Promise((resolve=>{if(document.querySelector(selector))return resolve(document.querySelector(selector));const observer=new MutationObserver((()=>{document.querySelector(selector)&&(resolve(document.querySelector(selector)),observer.disconnect())}));observer.observe(document.body,{childList:!0,subtree:!0})}))).then((()=>(blockKeyFiguresOnOpen(),function(instid){(function(selector){return new Promise((resolve=>{if(!document.querySelector(selector))return resolve(document.querySelector(selector));const observer=new MutationObserver((()=>{document.querySelector(selector)||(resolve(document.querySelector(selector)),observer.disconnect())}));observer.observe(document.body,{childList:!0,subtree:!0})}))})("input[name='blockid'][value='"+instid+"']").then((()=>(blockKeyFiguresOnOpen(),blockKeyFiguresWaitModal(instid),!0))).catch((error=>(console.error(error),!1)))}(instid),!0))).catch((error=>(console.error(error),!1)))}function blockKeyFiguresOnOpen(){document.querySelectorAll('[id^="id_config_block_number"]').forEach((function(element){blockKeyFiguresManageLines(element,"id_configheader"),element.addEventListener("change",(function(){blockKeyFiguresManageLines(element,"id_configheader")}))})),document.querySelectorAll('[id^="id_config_line_number_"]').forEach((function(element){blockKeyFiguresChangeLine(element),element.addEventListener("change",(function(){blockKeyFiguresChangeLine(element)}))}))}function blockKeyFiguresManageLines(element,targetid){let blockNumber=parseInt(element.value);document.querySelectorAll('[id^="'+targetid+'"]').forEach((function(element){let match=element.id.match(new RegExp(targetid+"(\\d+)_"));if(match){let num=parseInt(match[1]);element.style.display=num>blockNumber?"none":""}}))}function blockKeyFiguresChangeLine(object){let blocknum=object.id;blocknum=parseInt(blocknum.replace("id_config_line_number_","")),blockKeyFiguresManageLines(object,"fitem_id_config_number_"+blocknum+"_"),blockKeyFiguresManageLines(object,"fitem_id_config_number_caption_"+blocknum+"_")}_exports.init=(instid,waitModal)=>{window.blockKeyFiguresManageLines=blockKeyFiguresManageLines,window.blockKeyFiguresChangeLine=blockKeyFiguresChangeLine,waitModal?blockKeyFiguresWaitModal(instid):blockKeyFiguresOnOpen()}}));

//# sourceMappingURL=editform.min.js.map